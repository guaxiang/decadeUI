/*角色基本外观*/
.player {
	height: 180px;
	width: 120px;
	border-radius: 8px;
}

.player.dead {
	animation: player-died 0.5s linear;
	-webkit-animation: player-died 0.5s linear;
	animation-iteration-count: 1;
}

/* 国战模式使用bj2背景 */
[data-mode="guozhan"] .player,
.player[data-mode="guozhan"] {
	background: url("../assets/image/bj2.png") no-repeat center center !important;
	background-size: 100% 100% !important;
}

/* 其他模式保持原有的单双将判断 */
[data-mode]:not([data-mode="guozhan"]) .player.fullskin2,
[data-mode]:not([data-mode="guozhan"]) .player.double-character,
[data-mode]:not([data-mode="guozhan"]) .player[data-double="1"],
[data-mode]:not([data-mode="guozhan"]) .player.double {
	background: url("../assets/image/bj2.png") no-repeat center center !important;
	background-size: 100% 100% !important;
}

.player::before {
	opacity: 0;
	background-repeat: no-repeat;
	animation-name: kf-sprites-glow;
	animation-duration: 0s;
	animation-delay: 0s;
	animation-iteration-count: infinite;
	animation-fill-mode: forwards;
	animation-timing-function: steps(1);
	pointer-events: none;
	box-shadow: none;
	transition: opacity 0.1s linear;
}

.player.selectable:not(.selected):not(.target)::before {
	animation-duration: 0.9s;
	opacity: 1;
}

.player::after,
.player.selected::after,
.player.selectable::after {
	opacity: 0;
	background-repeat: no-repeat;
	animation-name: kf-sprites-glow;
	animation-duration: 0s;
	animation-delay: 0s;
	animation-iteration-count: infinite;
	animation-fill-mode: forwards;
	animation-timing-function: steps(1);
	pointer-events: none;
	box-shadow: none;
	transition: opacity 0.1s linear;
}

.player.target:not(.glow_phase):not(.selectable):not(.selected)::after {
	animation-duration: 0.9s;
	opacity: 1;
}

#arena>.player {
	z-index: 4;
}

.player>.mask {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	border-radius: inherit;
	background: rgba(0, 0, 0, 0.65);
	opacity: 0;
	transition: opacity 0.3s ease-in-out;
	pointer-events: none;
	z-index: 66;
}

.player.un-selectable:not(.selectable)>.mask {
	opacity: 1;
	transition: opacity 0.3s linear;
}

/*玩家锁链*/
.player>.chain {
	visibility: hidden;
	background-size: cover;
	background-position-x: -120px;
	background-repeat: no-repeat;
	transition-duration: 0.4s;
	z-index: 86;
}

.player.linked2>.chain {
	visibility: visible;
	background-position-x: center;
}

/*主玩家位置*/
.player[data-position="0"],
#arena>.player[data-position="0"],
#arena>.player[data-position="0"]:not(.minskin),
#arena:not(*[data-player_height=""])>.player[data-position="0"],
#arena:not(*[data-player_height=""])>.player[data-position="0"]:not(.miniskin) {
	left: 25px;
	top: auto;
	right: auto;
	bottom: 1%;
}

#arena[data-right-layout="on"]>.player[data-position="0"],
#arena[data-right-layout="on"]>.player[data-position="0"]:not(.miniskin) {
	left: auto;
	right: 25px;
}

.player.connect>div:not(.avatar):not(.name):not(.nameol):not(.hp):not(.room):not(.gaming):not(.identity).camp-wrap {
	display: block !important;
}

/*新增*/
.player.connect>div:not(.avatar):not(.name):not(.nameol):not(.hp):not(.room):not(.gaming):not(.identity).primary-avatar {
	display: block !important;
}

.player>.camp-wrap div {
	transition: none;
}

.player.unseen>.camp-wrap>.avatar-name,
.player:not(.unseen)>.camp-wrap>.avatar-name-default,
.player:not(.unseen2)>.camp-wrap>.avatar2-name-default {
	visibility: hidden;
}

.player>.unseen_show>.primary-avatar,
.player>.unseen2_show>.deputy-avatar {
	opacity: 0;
}

#arena:not(.observe) .player:not([data-position="0"]).unseen_show>.primary-avatar,
#arena:not(.observe) .player:not([data-position="0"]).unseen2_show>.deputy-avatar {
	opacity: 1 !important;
	background-image: url("../../../image/character/hidden_image.jpg") !important;
}

.player>.name.name2:empty,
#arena>.player:not(.minskin)>.name.name2:empty {
	display: none;
}

.player.fullskin.fullskin2>.name.name2:empty::before {
	content: "副将";
}

/*联机名称显示*/
.player>.nameol {
	top: 5px;
	font-size: 16px;
	font-family: "shousha";
	text-shadow: 0 0 2px black;
	background: linear-gradient(to right, transparent 0%, rgba(0, 0, 0, 0.4) 40%, rgba(0, 0, 0, 0.4) 60%, transparent 100%);
	z-index: 89;
	pointer-events: none;
}

.player.unseen>.primary-avatar,
.player.unseen2>.deputy-avatar,
.player.d-skin>.primary-avatar,
.player.d-skin2>.deputy-avatar {
	opacity: 0;
}

#arena:not(.observe)>.player[data-position="0"].unseen>.primary-avatar,
#arena:not(.observe)>.player[data-position="0"].unseen2>.deputy-avatar {
	opacity: 0.3;
}

/*武将牌显示*/
.player>.primary-avatar {
	top: auto;
	bottom: 0;
	opacity: 1;
	background-size: cover;
	background-repeat: no-repeat;
	background-position: top;
	border-radius: 8px;
	transition-property: opacity, transform;
}

.player.fullskin2>.primary-avatar {
	width: 50%;
	border-radius: 8px 0 0 8px;
}

.player.bossplayer>.primary-avatar:not(.hp):not(.identity):not(.avatar):not(.framebg) {
	display: block !important;
}

.player>.deputy-avatar {
	top: auto;
	bottom: 0;
	opacity: 1;
	background-size: cover;
	background-repeat: no-repeat;
	background-position: top;
	border-radius: 0 8px 8px 0;
	transition-property: opacity, transform;
}

/*单将露头*/
#arena[data-outcrop-skin="shizhounian"]>.player>.primary-avatar {
	height: 192px;
	clip-path: url(#solo-clip);
	-webkit-clip-path: url(#solo-clip);
}

#arena[data-outcrop-skin="shousha"]>.player>.primary-avatar {
	height: 207px;
	clip-path: url(#solo-clip);
	-webkit-clip-path: url(#solo-clip);
}

/*双将露头*/
#arena[data-outcrop-skin="shizhounian"]>.player>.deputy-avatar {
	height: 192px;
	clip-path: url(#solo-clip);
	-webkit-clip-path: url(#duor-clip);
}

#arena[data-outcrop-skin="shousha"]>.player>.deputy-avatar {
	height: 207px;
	clip-path: url(#solo-clip);
	-webkit-clip-path: url(#duor-clip);
}

/*武将牌动皮显示*/
.player>.dynamic-wrap {
	display: block;
	position: absolute;
	left: 0;
	bottom: 0;
	width: 100%;
	height: 100%;
	border-radius: 8px;
	background-size: cover;
	background-repeat: no-repeat;
	pointer-events: none;
	z-index: 60;
}

.player>.dynamic-wrap>.animation-player {
	display: block;
	position: absolute;
	left: 0;
	bottom: 0;
	width: 100%;
	height: 100%;
	border-radius: inherit;
	pointer-events: none;
	clip-path: inset(0 0 0 0 round 8px);
	-webkit-clip-path: inset(0 0 0 0 round 8px);
}

#arena[data-dynamic-skin-outcrop="on"]>.player>.dynamic-wrap>.animation-player {
	clip-path: url(#dskin-clip);
	-webkit-clip-path: url(#dskin-clip);
	height: 200px;
}

.player>.dynamic-wrap>.primary-bg,
.player>.dynamic-wrap>.deputy-bg {
	top: auto;
	bottom: 0;
	width: 50%;
	height: 100%;
	opacity: 0;
	background-size: cover;
	background-repeat: no-repeat;
	background-position: top;
	border-radius: 8px 0 0 8px;
	transition-property: opacity, transform;
}

.player>.dynamic-wrap>.deputy-bg {
	left: 50%;
}

.player.d-skin>.dynamic-wrap>.primary-bg,
.player.d-skin2>.dynamic-wrap>.deputy-bg {
	opacity: 1;
}

#arena:not(.observe)>.player[data-position="0"].unseen.d-skin>.dynamic-wrap>.primary-bg,
#arena:not(.observe)>.player[data-position="0"].unseen2.d-skin2>.dynamic-wrap>.deputy-bg {
	opacity: 0.3;
}

#window:not(*[data-radius_size=""]) .player {
	border-radius: 8px;
}

/*行动*/
.player>.primary-avatar>.action {
	display: block;
	position: absolute;
	left: 0;
	top: auto;
	right: 0;
	bottom: 0;
	width: 100%;
	margin: 0;
	text-align: center;
}

/*玩家标记显示-灯笼*/
.player>.dui-marks {
	display: flex;
	flex-direction: column;
	left: auto;
	top: 1px;
	right: -20px;
	width: 18px;
	height: auto;
	padding-bottom: 0;
	z-index: 88;
	transition-property: opacity, transform, background;
}

.player>.dui-marks>.mark {
	display: flex;
	align-items: center;
	align-content: center;
	justify-content: center;
	position: relative;
	margin-top: 0;
	margin-left: 0;
	margin-right: 0;
	margin-bottom: 5px;
	width: 18px;
	height: auto;
	border-radius: 0;
	font-family: xinwei, xingkai;
	box-shadow: none;
	background: none;
	overflow: visible;
	animation: open 0.5s;
}

.player>.dui-marks>.mark:before,
.player>.dui-marks>.mark:after {
	display: none;
}

.player>.dui-marks>.mark>.mark-text {
	display: flex;
	align-items: center;
	align-content: center;
	justify-content: center;
	position: relative;
	padding-top: 3px;
	padding-bottom: 3px;
	width: 17px;
	height: auto;
	min-height: 16px;
	line-height: 16px;
	text-align: center;
	font-size: 20px;
	font-family: xinwei, xingkai;
	color: rgb(77, 60, 51);
	border-radius: 5px;
	background-image: radial-gradient(rgb(255, 255, 200) 0, rgb(255, 255, 120) 50%, rgb(255, 255, 10) 80%, yellow 100%);
	box-shadow: 0 0 1px yellow;
	text-shadow: none;
	animation: swing 1.5s alternate infinite ease-in-out;
}

.player>.dui-marks>.mark>.mark-text.small-text {
	font-size: 14px;
	line-height: 11px;
}

.player>.dui-marks>.mark>.mark-text::before {
	content: "";
	display: block;
	position: absolute;
	left: 30%;
	top: -1px;
	width: 40%;
	height: calc(100% + 3px);
	border-top: 1px solid black;
	border-bottom: 2px solid #ff9900;
	box-sizing: border-box;
}

.player>.dui-marks>.mark>.mark-count {
	position: absolute;
	left: auto;
	top: -2px;
	right: -5px;
	bottom: auto;
	height: 10px;
	width: 10px;
	line-height: 11px;
	font-size: 11px;
	font-weight: bold;
	text-shadow: none;
	text-align: center;
	border-radius: 100%;
	background: yellow;
	box-shadow: 0 0 1px black inset;
}

.player>.dui-marks>.mark>.image {
	display: none;
}

#arena[data-player-mark-style="red"]>.player>.dui-marks>.mark>.mark-text {
	color: yellow;
	text-shadow: 0 0 1px black, 0 0 1px black;
	box-shadow: 0 0 1px yellow;
	background-image: radial-gradient(rgb(100, 255, 100), rgb(255, 120, 0), rgb(255, 0, 0));
}

#arena[data-player-mark-style="red"]>.player>.dui-marks>.mark>.mark-count {
	color: #c86400;
	background: #ffdc00;
}

.mark-container.marks>.mark {
	overflow: visible;
}

.mark-container.marks>.mark>.mark-text {
	display: flex;
	position: absolute;
	justify-content: center;
	align-items: center;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	color: black;
	font-size: 20px;
}

.mark-container.marks>.mark>.mark-count {
	display: block;
	position: absolute;
	right: -5px;
	width: 15px;
	background: white;
	border-radius: 4px;
}

/*玩家判定标记显示*/
.player>.judges>.card>.image {
	display: none;
}

.player>.judges>.card>.judge-mark>.back {
	display: block;
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	transition: none;
	z-index: -1;
}

.player>.judges>.card>.judge-mark>.back::before {
	display: block;
	position: absolute;
	content: "";
	left: 12%;
	top: 12%;
	right: 12%;
	bottom: 12%;
	z-index: -1;
}

.player>.judges>.card>.judge-mark>div:not(.back) .player>.judges>.card>.judge-mark>div:not(.judge) {
	display: none;
}

.player>.judges>.card>.background,
.judges>.card.fakejudge.fullskin>.background,
.judges>.card.fakejudge.fullborder>.background {
	display: none !important;
}

/*玩家号位显示*/
.player>.name_seat {
	display: none !important;
}

/* 当显示进度条时隐藏座位号 */
.player:has(.timeai)>.seat,
.player:has(.timePhase)>.seat {
	display: none !important;
}

/*人物弹出文字*/
.player>.damage {
	width: 100%;
	text-shadow: none;
	transition: none;
	z-index: 91;
}

/*联机用牌时限*/
.player>.timerbar {
	display: block;
	position: absolute;
	left: 0;
	top: auto;
	bottom: -10px;
	width: 100%;
	z-index: 88;
}

.player[data-position="0"]>.timerbar {
	top: -15px;
	bottom: auto;
}

.player>.timerbar>div,
#arena .timerbar>div {
	position: absolute;
	left: calc(50% - 50px);
	top: auto !important;
	right: auto;
	width: 100px;
	height: 5px;
}

.player>.timerbar>div:first-child {
	box-shadow: 0 0 4px yellow;
	background: rgb(100, 0, 0);
}

/*联机游戏等待中*/
.player.connect>.gaming {
	display: block;
	position: absolute;
	left: 0;
	top: calc(50% - 16px);
	width: 100%;
	height: 32px;
	font-size: 32px;
	font-family: "xinwei";
	text-align: center;
	z-index: 89;
}

/*玩家死亡变灰*/
.player.dead {
	opacity: 1;
	filter: none;
	-webkit-filter: none;
}

.player.dead>div {
	filter: grayscale(1);
	-webkit-filter: grayscale(1);
}

/*玩家获得的技能显示*/
.player>.gain-skill {
	position: absolute;
	left: 15px;
	right: 15px;
	max-height: calc(97% - 81px);
	bottom: calc(3% + 81px);
	color: rgb(255, 255, 200);
	font-size: 20px;
	font-family: yuanli;
	text-align: center;
	z-index: 87;
}

#arena.decadeUI[data-gain-skills-visible="off"]>.player>.gain-skill,
#arena.decadeUI[data-gain-skills-visible="othersOn"]>.player[data-position="0"]>.gain-skill {
	display: none;
}

/*角色翻面背景*/
.player>.turned-over {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	opacity: 0;
	background-size: cover;
	pointer-events: none;
	z-index: 62;
}

.player.turnedover>.turned-over {
	opacity: 0.8;
}

.turnedover>div {
	opacity: initial;
}

/*角色边框*/
.player>.framebg {
	z-index: 63;
}

/*身份标记框*/
.player>.identity-mark-box {
	display: flex;
	position: absolute;
	justify-content: center;
	flex-wrap: wrap;
	top: 20%;
	left: 16%;
	width: 68%;
	height: auto;
	z-index: 99;
}

.player>.identity-mark-box>.identity-mark-item {
	position: static;
	width: auto;
	height: auto;
	min-width: 20px;
	line-height: 20px;
	border-style: solid;
	border-width: 10px;
	border-image-width: 18px;
	border-image-slice: 31 31 fill;
	border-image-source: url("../assets/image/item_bg.png");
	cursor: pointer;
	color: rgb(77, 60, 51);
	font-family: shousha;
	font-weight: bold;
	font-size: 20px;
	text-shadow: none;
	transition: opacity, background, transform 0.3s;
}

.player>.identity-mark-box>.identity-mark-item:active {
	transform: scale(0.9);
}

/*说话泡泡框*/
.player>.chat-bubble {
	left: 0;
	top: 20px;
	width: 100%;
	height: auto;
	border-style: solid;
	border-width: 6px 6px 14px 6px;
	border-image-slice: 6 6 14 6 fill;
	border-image-source: url("../assets/image/chat_bubble.png");
	box-sizing: border-box;
	word-break: break-all;
	z-index: 99;
}